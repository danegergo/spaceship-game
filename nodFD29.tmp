[gd_scene load_steps=9 format=3 uid="uid://cdqrvyax3d1mr"]

[ext_resource type="PackedScene" uid="uid://0k8gadwxcbtv" path="res://Spaceship/space_fighter.glb" id="1_dhg2s"]
[ext_resource type="Texture2D" uid="uid://06b1r3bxgvll" path="res://Skybox/panorama_image.png" id="2_26l8i"]
[ext_resource type="PackedScene" uid="uid://wmf2eu0uuhrg" path="res://addons/third-person-camera/third_person_camera/ThirdPersonCamera.tscn" id="2_j6f74"]

[sub_resource type="GDScript" id="GDScript_kk7qu"]
resource_name = "ShipController"
script/source = "extends CharacterBody3D

const FORWARD_SPEED = 500.0
const XY_SPEED = 200

func _physics_process(delta):
	var input_dir = Input.get_vector(\"move_right\", \"move_left\", \"move_down\", \"move_up\")
	var direction = (transform.basis * Vector3(input_dir.x, input_dir.y, 0).normalized()

	if direction:
		velocity.x = direction.x * XY_SPEED
		velocity.y = direction.y * XY_SPEED
		velocity.z = direction.z * FORWARD_SPEED
	else:
		velocity.x = move_toward(velocity.x, 0, XY_SPEED)
		velocity.y = move_toward(velocity.y, 0, XY_SPEED)
		velocity.z = move_toward(velocity.z, 0, FORWARD_SPEED)

	move_and_slide()
"

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_s1eij"]
radius = 11.774
height = 31.96

[sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_8jqb6"]
panorama = ExtResource("2_26l8i")

[sub_resource type="Sky" id="Sky_7p2qo"]
sky_material = SubResource("PanoramaSkyMaterial_8jqb6")

[sub_resource type="Environment" id="Environment_mv8gi"]
background_mode = 2
sky = SubResource("Sky_7p2qo")

[node name="Node3D" type="Node3D"]

[node name="Sketchfab_Scene" parent="." instance=ExtResource("1_dhg2s")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 27.222, 7.68295, -781.523)

[node name="CharacterBody3D" type="CharacterBody3D" parent="."]
transform = Transform3D(-0.999931, 0, 0.0117458, 0, 1, 0, -0.0117458, 0, -0.999931, -0.0428441, 0, -0.179112)
script = SubResource("GDScript_kk7qu")

[node name="CollisionShape3D" type="CollisionShape3D" parent="CharacterBody3D"]
transform = Transform3D(0.999865, -0.0117446, -0.0115794, 0.0117446, 0.0141018, 0.999832, -0.0115794, -0.999832, 0.0142379, 0.0557486, 0, 4.74593)
shape = SubResource("CapsuleShape3D_s1eij")

[node name="SpaceshipModel" parent="CharacterBody3D" instance=ExtResource("1_dhg2s")]

[node name="ThirdPersonCamera" parent="CharacterBody3D" instance=ExtResource("2_j6f74")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.201257, 14.1982, -17.1332)
current = true
spring_arm_collision_mask = 277

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_mv8gi")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3024.04, 2681.6, -3108.84)
light_energy = 4.0
shadow_enabled = true
